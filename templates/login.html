<!-- templates/login.html -->
{% extends "base.html" %}
{% block title %}Login{% endblock %}

{% block content %}
<div class="form-container card shadow p-5">
    <h2 class="text-center mb-3">Login</h2>
    <p class="text-center text-muted mb-4">Welcome back! Please login to access your dashboard.</p>

    <form method="POST" novalidate>
        {{ form.hidden_tag() }}

        <!-- Email Field -->
        <div class="mb-4">
            {{ form.email.label(class="form-label") }}
            {{ form.email(class="form-control", placeholder="Enter your email") }}
            {% if form.email.errors %}
                <div class="text-danger small mt-1">{{ form.email.errors[0] }}</div>
            {% endif %}
        </div>

        <!-- Password Field with Show/Hide Toggle -->
        <div class="mb-4 position-relative">
            {{ form.password.label(class="form-label") }}
            <div class="input-group">
                {{ form.password(class="form-control pe-5", placeholder="Enter your password", id="password-field") }}
                <button type="button" class="btn btn-outline-secondary position-absolute end-0 top-50 translate-middle-y me-2" 
                        id="toggle-password" style="z-index: 10;">
                    üëÅÔ∏è
                </button>
            </div>
            {% if form.password.errors %}
                <div class="text-danger small mt-1">{{ form.password.errors[0] }}</div>
            {% endif %}
        </div>

        <!-- Submit Button -->
        <div class="d-grid mb-4">
            {{ form.submit(class="btn btn-primary btn-lg") }}
        </div>

        <!-- Forgot Password Link -->
        <div class="text-center">
            <a href="{{ url_for('forgot_password') }}" class="text-decoration-none small">
                Forgot your password?
            </a>
        </div>
    </form>

    <hr class="my-4">

    <p class="text-center text-muted">
        Don't have an account? 
        <a href="{{ url_for('signup') }}" class="text-primary fw-bold">Sign up here</a>
    </p>
</div>

<!-- Show/Hide Password Script -->
<script>
    const toggleButton = document.getElementById('toggle-password');
    const passwordField = document.getElementById('password-field');

    toggleButton.addEventListener('click', function () {
        // Toggle the type attribute
        const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordField.setAttribute('type', type);

        // Toggle eye icon
        this.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà';
    });
</script>
{% endblock %}